!function(a){function t(t,o){this.mapWrapper=a(t)[0],this.settings=a.extend({},o),this.markers=[],this.mapData="",this.init()}t.prototype.init=function(){this.getMapData()},t.prototype.getMapData=function(){var t=this,o=t.settings.json.jsonfield||"",e=t.settings.json.jsonurl||"";if(o){if(a(o).length>0){var n=a.parseJSON(a(o).val())||"";""!==n&&null!==n&&void 0!==n&&(t.mapData=n,t.set())}}else e?a.getJSON(e,function(a){t.mapData=a,t.set()}):console.log("Please provide json data in jsonfield/ jsonurl")},t.prototype.set=function(){var a=this;a.setMap(),a.setMarkers()};var o=2,e={lat:0,lng:0};"false"==a("#isInternational").val()&&(o=4,e={lat:21,lng:78}),t.prototype.setMap=function(){var a=this,t={zoom:o,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},center:e,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(a.mapWrapper,t),this.map.setOptions({minZoom:2,maxZoom:7})},t.prototype.setMarkers=function(){for(var a=this,t=0;t<a.mapData.length;t++){var o=new google.maps.LatLng(a.mapData[t].LatLong[0],a.mapData[t].LatLong[1]),e=new google.maps.Marker({position:o,map:a.map,id:a.mapData[t].pageURL,title:a.mapData[t].Name,icon:a.mapData[t].pin});a.setInfobox(e,t)}a.markerClick()},t.prototype.setInfobox=function(a,t){var o,e=this,n={content:o=null===e.mapData[t].pageURL?"<span class='arrow'></span><div class='infoContent'><h2>"+e.mapData[t].Name+"</h2></div>":"<span class='arrow'></span><div class='infoContent'><h2>"+e.mapData[t].Name+"</h2><a href="+e.mapData[t].pageURL+" class='readMore' target='_blank'>More</a></div>",disableAutoPan:!1,maxWidth:0,pixelOffset:new google.maps.Size(-22,-6),alignBottom:!0,zIndex:null,boxStyle:{background:"",width:"260px"},closeBoxMargin:"5px 5px 0px 0px",closeBoxURL:"/assets/site/images/close.gif",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},i=new InfoBox(n);a.info=i,e.markers.push(a)},t.prototype.markerClick=function(){for(var a=this,t=0;t<a.markers.length;t++)!function(t){google.maps.event.addListener(t,"click",function(){for(var t=0;t<a.markers.length;t++)a.markers[t].info.close();this.setPosition(this.position),this.info.open(a.map,this)})}(a.markers[t])},a.fn.gmap=function(o){return this.each(function(){var e=a(this);if(!e.data("gmap")){var n=new t(this,o);e.data("gmap",n)}})}}(jQuery),$(window).load(function(){"object"==typeof google&&"object"==typeof google.maps?($(".mapView").on("click",function(){var a=$(this).attr("rel"),t=$("#map1").data("gmap");if(t)for(var o=0;o<t.markers.length;o++)t.markers[o].id==a&&google.maps.event.trigger(t.markers[o],"click");$("html, body").animate({scrollTop:0},1e3)}),$("#map1").gmap({json:{jsonfield:"#mapJson",jsonurl:""}})):($(".mapContainer").hide(),$(".mapView").hide())});